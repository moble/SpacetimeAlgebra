<?xml version="1.0" encoding="utf-8" ?>

<g25spec
    license="custom"
    language="cpp"
    namespace="SpacetimeAlgebra"
    coordStorage="array"
    defaultOperatorBindings="true"
    dimension="4"
    reportUsage="false"
    gmvCode="expand"
    parser="builtin"
    testSuite="true"
    copyright="Copyright (c) 2014 Mike Boyle"
>

  <customLicense>
    Licensed under the  MIT license; see LICENSE file for full details.
  </customLicense>

  <outputFilename
      defaultName="SpacetimeAlgebra.h"
      customName="SpacetimeAlgebra.hpp" />

  <!-- <verbatim filename="SpacetimeAlgebra.hpp" position="before" marker="namespace SpacetimeAlgebra {"> -->
  <!-- // Any verbatim text should be placed here -->
  <!-- </verbatim> -->

  <!-- Inline all possible functions -->
  <inline
      constructors="true"
      set="true"
      assign="true"
      operators="true"
      functions="true"
      />

  <floatType type="double" />

  <!-- Define the basis -->
  <basisVectorNames
      name1="gamma_0"
      name2="gamma_1"
      name3="gamma_2"
      name4="gamma_3"
      />
  <metric name="default">gamma_0.gamma_0=-1</metric>
  <metric name="default">gamma_1.gamma_1=gamma_2.gamma_2=gamma_3.gamma_3=1</metric>

  <!-- General multivectors -->
  <mv name="multivector" compress="byGrade" coordinateOrder="default" memAlloc="full"></mv>

  <!-- The basic vectors -->
  <smv name="gamma_0" const="true" type="blade">gamma_0=1</smv>
  <smv name="gamma_1" const="true" type="blade">gamma_1=1</smv>
  <smv name="gamma_2" const="true" type="blade">gamma_2=1</smv>
  <smv name="gamma_3" const="true" type="blade">gamma_3=1</smv>

  <!-- The two important pseudoscalars -->
  <smv name="I" const="true" type="blade">gamma_0^gamma_1^gamma_2^gamma_3=1</smv>
  <smv name="I3" const="true" type="blade">gamma_1^gamma_2^gamma_3=1</smv>

  <!-- Important sub-types of multivectors -->
  <smv name="vector" type="blade">
    gamma_0 gamma_1 gamma_2 gamma_3
  </smv>
  <smv name="vector3" type="blade">
    gamma_1 gamma_2 gamma_3
  </smv>
  <smv name="bivector" type="blade">
    gamma_0^gamma_1 gamma_0^gamma_2 gamma_0^gamma_3
    gamma_1^gamma_2 gamma_1^gamma_3 gamma_2^gamma_3
  </smv>
  <smv name="bivector3" type="blade">
    gamma_1^gamma_2 gamma_1^gamma_3 gamma_2^gamma_3
  </smv>
  <smv name="rotor" type="versor">
    scalar
    gamma_0^gamma_1 gamma_0^gamma_2 gamma_0^gamma_3
    gamma_1^gamma_2 gamma_1^gamma_3 gamma_2^gamma_3
    gamma_0^gamma_1^gamma_2^gamma_3
  </smv>
  <smv name="rotor3" type="versor">
    scalar
    gamma_1^gamma_2 gamma_1^gamma_3 gamma_2^gamma_3
  </smv>

  <!-- Converters between specialized types -->
  <function name="_vector" arg1="multivector" />
  <function name="_bivector" arg1="multivector" />
  <function name="_rotor" arg1="multivector" />
  <function name="_vector3" arg1="multivector" />
  <function name="_bivector3" arg1="multivector" />
  <function name="_rotor3" arg1="multivector" />
  <function name="_vector3" arg1="vector" />
  <function name="_bivector3" arg1="bivector" />
  <function name="_rotor3" arg1="rotor" />

  <!-- Grade extraction -->
  <!-- Note that some grades and certain combinations of grades can -->
  <!-- be extracted by the functions among the above converters. -->
  <function name="extractGrade" arg1="multivector" /> <!-- Needed internally for the following -->
  <function name="extractGrade0" arg1="multivector" />
  <function name="extractGrade1" arg1="multivector" />
  <function name="extractGrade2" arg1="multivector" />
  <function name="extractGrade3" arg1="multivector" />
  <function name="extractGrade4" arg1="multivector" />

  <!-- Basic vector operators -->
  <function name="add" arg1="anysmv" arg2="anysmv" />
  <function name="subtract" arg1="anysmv" arg2="multivector" />
  <function name="div" arg1="multivector" arg2="double" />

  <!-- Geometric operations -->
  <function name="gp" arg1="double" arg2="multivector" /> <!-- scalar multiplication -->
  <function name="gp" arg1="multivector" arg2="double" /> <!-- scalar multiplication -->
  <function name="gp" arg1="multivector" arg2="anysmv" /> <!-- geometric product -->
  <function name="rc" arg1="multivector" arg2="multivector" /> <!-- right contraction -->
  <function name="lc" arg1="multivector" arg2="multivector" /> <!-- left contraction -->
  <function name="sp" arg1="multivector" arg2="multivector" /> <!-- scalar product -->
  <function name="op" arg1="multivector" arg2="multivector" /> <!-- outer product -->

  <!-- Dualization and involutions -->
  <function name="dual" arg1="multivector" />
  <function name="negate" arg1="anysmv" />
  <function name="reverse" arg1="multivector" />
  <function name="cliffordConjugate" arg1="multivector" />
  <function name="gradeInvolution" arg1="multivector" />

  <!-- Norms and normalization -->
  <function name="norm" arg1="multivector" />
  <function name="norm2" arg1="multivector" />
  <function name="unit" arg1="multivector" /> <!-- I believe this normalizes a multivector... -->
  <function name="versorInverse" arg1="multivector" />

  <!-- Transcendental functions -->
  <function name="sas" arg1="multivector" arg2="double" arg3="double"/> <!-- Needed internally for the following -->
  <!-- <function name="log" arg1="multivector" /> --> <!-- log is only implemented for 3d Euclidean multivectors -->
  <function name="exp" arg1="multivector" />
  <function name="sin" arg1="multivector" />
  <function name="cos" arg1="multivector" />
  <function name="sinh" arg1="multivector" />
  <function name="cosh" arg1="multivector" />

  <!-- Rotor operations -->
  <function name="applyVersor" arg1="rotor" argName1="R" arg2="vector" argName2="v" />
  <function name="applyUnitVersor" arg1="rotor3" argName1="R" arg2="vector3" argName2="v" />

  <!-- Needed for tests -->
  <function name="random_double" outputName="genrand" optionGen="mt" />

</g25spec>
